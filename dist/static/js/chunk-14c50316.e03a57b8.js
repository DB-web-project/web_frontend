(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14c50316"],{"64a0":function(e,t,r){},"80c1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("vue-canvas-nest",{staticClass:"canvas-nest",attrs:{config:e.config}}),r("div",{staticClass:"body"},[e._m(0),r("div",{staticClass:"login-container"},[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.isLogin?r("div",{key:"login",staticClass:"login"},[r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{type:"text",placeholder:e.showRoleHint?"填写用户/管理员/商家":""},domProps:{value:e.role},on:{focus:function(t){e.animatePlaceholder,e.showRoleHint=!0},blur:function(t){e.animatePlaceholder,e.showRoleHint=!1},input:function(t){t.target.composing||(e.role=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.role}},[e._v("身份")])]),r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:""},domProps:{value:e.username},on:{focus:e.animatePlaceholder,blur:e.animatePlaceholder,input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.username}},[e._v("用户名")])]),r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:""},domProps:{value:e.password},on:{focus:e.animatePlaceholder,blur:e.animatePlaceholder,input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.password}},[e._v("密码")])]),r("div",{staticClass:"loginbtn",on:{mouseover:function(t){return e.animateButton(!0)},mouseleave:function(t){return e.animateButton(!1)},click:e.submitForm}},[e._v("登录")])]):r("div",{key:"register",staticClass:"login"},[r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.role_register,expression:"role_register"}],attrs:{type:"text",placeholder:e.showRoleHint?"填写用户/商家":""},domProps:{value:e.role_register},on:{focus:function(t){e.animatePlaceholder,e.showRoleHint=!0},blur:function(t){e.animatePlaceholder,e.showRoleHint=!1},input:function(t){t.target.composing||(e.role_register=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.role_register}},[e._v("身份")])]),r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.username_register,expression:"username_register"}],attrs:{type:"text",placeholder:""},domProps:{value:e.username_register},on:{focus:e.animatePlaceholder,blur:e.animatePlaceholder,input:function(t){t.target.composing||(e.username_register=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.username_register}},[e._v("用户名")])]),r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.email_register,expression:"email_register"}],attrs:{type:"email",placeholder:""},domProps:{value:e.email_register},on:{focus:e.animatePlaceholder,blur:e.animatePlaceholder,input:function(t){t.target.composing||(e.email_register=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.email_register}},[e._v("邮箱")])]),r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.password_register,expression:"password_register"}],attrs:{type:"password",placeholder:""},domProps:{value:e.password_register},on:{focus:e.animatePlaceholder,blur:e.animatePlaceholder,input:function(t){t.target.composing||(e.password_register=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.password_register}},[e._v("密码")])]),r("div",{staticClass:"field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.assure_register,expression:"assure_register"}],attrs:{type:"password",placeholder:""},domProps:{value:e.assure_register},on:{focus:e.animatePlaceholder,blur:e.animatePlaceholder,input:function(t){t.target.composing||(e.assure_register=t.target.value)}}}),r("div",{staticClass:"placeholder",class:{focused:e.assure_register}},[e._v("确认密码")])]),r("div",{staticClass:"loginbtn",on:{mouseover:function(t){return e.animateButton(!0)},mouseleave:function(t){return e.animateButton(!1)},click:e.register}},[e._v("注册")])])]),r("button",{staticClass:"cta",on:{click:e.toggleForm}},[e.isLogin?r("span",[e._v("注册")]):r("span",[e._v("登录")]),r("svg",{attrs:{viewBox:"0 0 13 10",height:"10px",width:"15px"}},[r("path",{attrs:{d:"M1,5 L11,5"}}),r("polyline",{attrs:{points:"8 1 12 5 8 9"}})])])],1)])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("img",{staticClass:"logo",attrs:{alt:"logo",src:r("4ffd")}}),a("span",{staticClass:"title"},[e._v("航评万象")])])])}],i=(r("caad"),r("96cf"),r("1da1")),n=r("cffa"),o=r("429a"),l=r.n(o),u=r("cebe"),c=r.n(u),d=r("b775"),p={components:{VueCanvasNest:l.a},data:function(){return{username:"",password:"",role:"",role_back:"",username_register:"",password_register:"",assure_register:"",role_register:"",email_register:"",showRoleHint:!1,isLogin:!0,config:{color:"255,0,0",pointColor:"0,0,255",opacity:.7,count:99,zIndex:-1},url_switch_login:""}},methods:{toggleForm:function(){this.isLogin=!this.isLogin,this.isLogin?(this.username_register="",this.password_register="",this.assure_register="",this.role_register="",this.email_register=""):(this.username="",this.password="",this.role="")},validateRole:function(e){var t=["用户","管理员","商家"];return t.includes(e)},animatePlaceholder:function(e){var t=e.target,r=t.nextElementSibling;"focus"===e.type?(n["a"].to(r,{y:-20,scale:.85,duration:.3,ease:"power2.out"}),t.parentElement.style.setProperty("--anim",1)):"blur"===e.type&&(t.value||(n["a"].to(r,{y:0,scale:1,duration:.3,ease:"power2.in"}),t.parentElement.style.setProperty("--anim",0)))},animateButton:function(e){var t=document.querySelector(".loginbtn");e?n["a"].to(t,{scale:1.05,backgroundColor:"#4a90e2",duration:.3}):n["a"].to(t,{scale:1,backgroundColor:"#6779f5",duration:.3})},submitForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateRole(e.role)){t.next=3;break}return alert("请输入有效的身份：用户、管理员或商家"),t.abrupt("return");case 3:if(e.username){t.next=6;break}return alert("请填写用户名"),t.abrupt("return");case 6:if(e.password){t.next=9;break}return alert("请填写密码"),t.abrupt("return");case 9:return"用户"===e.role?(e.role_back="User",e.url_switch_login=" http://47.93.172.156:8081/user/login"):"管理员"===e.role?(e.role_back="Admin",e.url_switch_login=" http://47.93.172.156:8081/admin/login"):(e.role_back="Business",e.url_switch_login=" http://47.93.172.156:8081/business/login"),t.prev=10,t.next=13,c.a.post(e.url_switch_login,{name:e.username,password:e.password});case 13:r=t.sent,r.data.id?(Object(d["d"])({token:r.data.id+Math.random(),expireAt:new Date((new Date).getTime()+18e5)}),sessionStorage.setItem("id",JSON.stringify(r.data.id)),sessionStorage.setItem("email",JSON.stringify(r.data.email)),sessionStorage.setItem("preference",JSON.stringify(r.data.preference)),sessionStorage.setItem("avator",JSON.stringify(r.data.avator)),sessionStorage.setItem("role",JSON.stringify(e.role_back)),sessionStorage.setItem("name",JSON.stringify(e.username)),e.$router.push("/Home")):alert("登录失败，请检查您的信息。"),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](10),alert("登录出错，请稍后重试。");case 20:case"end":return t.stop()}}),t,null,[[10,17]])})))()},register:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validateRole(e.role_register)){t.next=3;break}return alert("请输入有效的身份：用户、管理员或商家"),t.abrupt("return");case 3:if(e.username_register){t.next=6;break}return alert("请填写用户名"),t.abrupt("return");case 6:if(e.password_register){t.next=9;break}return alert("请填写密码"),t.abrupt("return");case 9:if(e.assure_register){t.next=12;break}return alert("请确认密码"),t.abrupt("return");case 12:if(e.email_register){t.next=15;break}return alert("请填写邮箱"),t.abrupt("return");case 15:if(!(e.password_register.length<8)){t.next=18;break}return alert("密码长度必须大于等于8个字符"),t.abrupt("return");case 18:if(r=/[A-Z]/.test(e.password_register),a=/[a-z]/.test(e.password_register),r&&a){t.next=23;break}return alert("密码必须同时包含大写字母和小写字母"),t.abrupt("return");case 23:if(e.password_register===e.assure_register){t.next=26;break}return alert("密码和确认密码不一致"),t.abrupt("return");case 26:return"用户"===e.role_register?e.url_switch_login=" http://47.93.172.156:8081/user/register":"管理员"===e.role_register?e.url_switch_login=" http://47.93.172.156:8081/admin/register":e.url_switch_login=" http://47.93.172.156:8081/business/register",t.prev=27,t.next=30,c.a.post(e.url_switch_login,{name:e.username_register,email:e.email_register,password:e.password_register});case 30:s=t.sent,s.data.id?(alert("注册成功"),e.toggleForm()):alert("注册失败，请检查您的信息。"),t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](27),alert("注册错误，请稍后重试。");case 37:case"end":return t.stop()}}),t,null,[[27,34]])})))()}}},m=p,g=(r("a417"),r("0c7c")),v=Object(g["a"])(m,a,s,!1,null,"eebd2e82",null),_=v.exports;t["default"]=_},a417:function(e,t,r){"use strict";var a=r("64a0"),s=r.n(a);s.a}}]);