(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f97e0ce"],{"0294":function(t,e,o){},"84d5":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dialog"},[o("div",{staticClass:"post-content"},[t.postImage?o("div",{staticClass:"image-preview"},[o("img",{attrs:{src:t.postImage,alt:"图片预览"}})]):t._e(),o("div",{staticClass:"input-section"},[o("div",{staticClass:"upload-section"},[o("input",{attrs:{type:"file",id:"upload"},on:{change:t.handleImageUpload}}),o("label",{attrs:{for:"upload"}},[t._v("上传图片")])]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.commodity_name,expression:"commodity_name"}],staticClass:"post-title-input",attrs:{type:"text",placeholder:"请输入商品名称"},domProps:{value:t.commodity_name},on:{input:function(e){e.target.composing||(t.commodity_name=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.commodity_price,expression:"commodity_price"}],staticClass:"post-title-input",attrs:{type:"number",placeholder:"请输入商品价格"},domProps:{value:t.commodity_price},on:{input:function(e){e.target.composing||(t.commodity_price=e.target.value)}}}),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commodity_description,expression:"commodity_description"}],attrs:{placeholder:"请输入商品介绍"},domProps:{value:t.commodity_description},on:{input:function(e){e.target.composing||(t.commodity_description=e.target.value)}}})])]),o("button",{staticClass:"post-button",on:{click:t.publishPost}},[t._v(" 发布 ")])])},a=[],s=(o("b0c0"),o("ac1f"),o("1276"),o("cebe")),c=o.n(s),n={data:function(){return{postImage:null,commodity_name:"",commodity_price:"",commodity_description:"",uploadfile:null,commodity_id:0}},methods:{handleImageUpload:function(t){var e=this,o=t.target.files[0];if(o){var i=new FileReader;i.onload=function(){e.postImage=i.result,e.uploadfile=o},i.readAsDataURL(o)}},publishPost:function(){var t=this;if(this.commodity_name&&this.commodity_price&&this.commodity_description){var e={name:this.commodity_name,price:this.commodity_price,introduction:this.commodity_description,business_id:sessionStorage.getItem("id")};c.a.post("http://47.93.172.156:8081/commodity/register",e).then((function(e){if(201===e.status){t.commodity_id=e.data.id;var o=t.uploadfile,i=o.name.split(".").pop().toLowerCase(),a=t.commodity_id+"good."+i,s=new File([o],a,{type:o.type}),n=new FormData;n.append("id",t.commodity_id),n.append("homepage",s),c.a.post("http://47.93.172.156:8081/commodity/upload",n).then((function(t){t.status})),alert("商品发布成功！"),t.resetForm(),t.$message.success("注册商品成功")}else alert("商品发布失败，请稍后再试！")})).catch((function(t){alert("商品发布失败，请稍后再试！")})),this.$router.push({path:"/account"})}else alert("请填写所有商品信息！")},resetForm:function(){this.postImage=null,this.commodity_name="",this.commodity_price="",this.commodity_description=""}}},m=n,d=(o("c998"),o("0c7c")),r=Object(d["a"])(m,i,a,!1,null,"39b6aa9a",null);e["default"]=r.exports},c998:function(t,e,o){"use strict";var i=o("0294"),a=o.n(i);a.a}}]);